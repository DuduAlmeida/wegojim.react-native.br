{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useEffect, useState } from \"react\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport * as Yup from \"yup\";\nimport { useForm } from \"react-hook-form\";\nimport { TRAINING_LIST } from \"./constants\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport { CURRENT_DIVISION, CURRENT_TRAINING } from \"../../constants/storage\";\nimport { useNavigation } from \"@react-navigation/native\";\nvar schema = Yup.object().shape({\n  service_name: Yup.string().required(\"Nome do serviço é obrigatório!\"),\n  email: Yup.string().email(\"Não é um email válido\").required(\"Email é obrigatório!\"),\n  password: Yup.string().required(\"Senha é obrigatória!\")\n});\nexport var useSelectTraining = function useSelectTraining() {\n  var _useNavigation = useNavigation(),\n      navigate = _useNavigation.navigate;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      list = _useState2[0],\n      setList = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      title = _useState4[0],\n      setTitle = _useState4[1];\n\n  var _useForm = useForm({\n    resolver: yupResolver(schema)\n  }),\n      control = _useForm.control,\n      errors = _useForm.formState.errors;\n\n  var getList = function () {\n    var _ref = _asyncToGenerator(function* () {\n      return setList(TRAINING_LIST);\n    });\n\n    return function getList() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var getDivision = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      var storageDivision = yield AsyncStorage.getItem(CURRENT_DIVISION);\n      var division = !!storageDivision ? JSON.parse(storageDivision) : null;\n      var text = String(division == null ? void 0 : division.title);\n      if (!division && !text) return {\n        isValid: false\n      };\n      setTitle(text);\n      return {\n        isValid: true\n      };\n    });\n\n    return function getDivision() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var setCurrentTraining = function () {\n    var _ref3 = _asyncToGenerator(function* (training) {\n      AsyncStorage.setItem(CURRENT_TRAINING, JSON.stringify(training));\n    });\n\n    return function setCurrentTraining(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    getList();\n  }, []);\n  useEffect(function () {\n    getDivision().then(function (_ref4) {\n      var isValid = _ref4.isValid;\n      if (!isValid) return navigate(\"SelectDivisions\");\n    });\n  }, []);\n  return {\n    list: list,\n    title: title,\n    errors: errors,\n    control: control,\n    setCurrentTraining: setCurrentTraining\n  };\n};","map":{"version":3,"names":["useEffect","useState","AsyncStorage","Yup","useForm","TRAINING_LIST","yupResolver","CURRENT_DIVISION","CURRENT_TRAINING","useNavigation","schema","object","shape","service_name","string","required","email","password","useSelectTraining","navigate","list","setList","title","setTitle","resolver","control","errors","formState","getList","getDivision","storageDivision","getItem","division","JSON","parse","text","String","isValid","setCurrentTraining","training","setItem","stringify","then"],"sources":["C:/Users/enzor/Desktop/wegojim/src/screens/SelectTraining/hooks.ts"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\n\r\nimport * as Yup from \"yup\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { TRAINING_LIST } from \"./constants\";\r\nimport { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport { CURRENT_DIVISION, CURRENT_TRAINING } from \"../../constants/storage\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\n\r\nconst schema = Yup.object().shape({\r\n  service_name: Yup.string().required(\"Nome do serviço é obrigatório!\"),\r\n  email: Yup.string()\r\n    .email(\"Não é um email válido\")\r\n    .required(\"Email é obrigatório!\"),\r\n  password: Yup.string().required(\"Senha é obrigatória!\"),\r\n});\r\n\r\nexport const useSelectTraining = () => {\r\n  const { navigate } = useNavigation<any>();\r\n  const [list, setList] = useState<any[]>([]);\r\n  const [title, setTitle] = useState<string>(\"\");\r\n  const {\r\n    control,\r\n    formState: { errors },\r\n  } = useForm({\r\n    resolver: yupResolver(schema),\r\n  });\r\n\r\n  const getList = async () => setList(TRAINING_LIST);\r\n\r\n  const getDivision = async () => {\r\n    const storageDivision = await AsyncStorage.getItem(CURRENT_DIVISION);\r\n    const division = !!storageDivision ? JSON.parse(storageDivision) : null;\r\n    const text = String(division?.title);\r\n\r\n    if (!division && !text) return { isValid: false };\r\n\r\n    setTitle(text);\r\n\r\n    return { isValid: true };\r\n  };\r\n\r\n  const setCurrentTraining = async (training: any) => {\r\n    AsyncStorage.setItem(CURRENT_TRAINING, JSON.stringify(training));\r\n  };\r\n\r\n  useEffect(() => {\r\n    getList();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    getDivision().then(({ isValid }) => {\r\n      if (!isValid) return navigate(\"SelectDivisions\");\r\n    });\r\n  }, []);\r\n\r\n  return {\r\n    list,\r\n    title,\r\n    errors,\r\n    control,\r\n    setCurrentTraining,\r\n  };\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}